(function(e,$){if(window.xheditor)return!1;var I=navigator.userAgent.toLowerCase(),Ba=-1!==I.indexOf("mobile"),J=e.browser,pa=parseFloat(J.version),h=J.msie,qa=J.mozilla,R=J.safari,Ca=J.opera,eb=-1<I.indexOf(" adobeair/"),Da=/OS 5(_\d)+ like Mac OS X/i.test(I);e.fn.xheditor=function(h){if(Ba&&!Da)return!1;var o=[];this.each(function(){if(e.nodeName(this,"TEXTAREA"))if(!1===h){if(this.xheditor)this.xheditor.remove(),this.xheditor=null}else if(this.xheditor)o.push(this.xheditor);else{var q=/({.*})/.exec(e(this).attr("class"));
if(q){try{q=eval("("+q[1]+")")}catch(t){}h=e.extend({},q,h)}q=new ra(this,h);if(q.init())this.xheditor=q,o.push(q)}});0===o.length&&(o=!1);1===o.length&&(o=o[0]);return o};var aa=0,S=!1,sa=!0,ta=!1,Sa=!1,t,ba,ca,da,K,Ea,ea,Fa,Ga,Ha,A;e("script[src*=xheditor]").each(function(){var e=this.src;if(e.match(/xheditor[^\/]*\.js/i))return A=e.replace(/[\?#].*$/,"").replace(/(^|[\/\\])[^\/]*$/,"$1"),!1});if(h){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(qb){}(I=e.fn.jquery)&&I.match(/^1\.[67]/)&&
(e.attrHooks.width=e.attrHooks.height=null)}var fb={27:"esc",9:"tab",32:"space",13:"enter",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},Ta="#FFFFFF,#CCCCCC,#C0C0C0,#999999,#666666,#333333,#000000,#FFCCCC,#FF6666,#FF0000,#CC0000,#990000,#660000,#330000,#FFCC99,#FF9966,#FF9900,#FF6600,#CC6600,#993300,#663300,#FFFF99,#FFFF66,#FFCC66,#FFCC33,#CC9933,#996633,#663333,#FFFFCC,#FFFF33,#FFFF00,#FFCC00,#999900,#666600,#333300,#99FF99,#66FF99,#33FF33,#33CC00,#009900,#006600,#003300,#99FFFF,#33FFFF,#66CCCC,#00CCCC,#339999,#336666,#003333,#CCFFFF,#66FFFF,#33CCFF,#3366FF,#3333FF,#000099,#000066,#CCCCFF,#9999FF,#6666CC,#6633FF,#6600CC,#333399,#330099,#FFCCFF,#FF99FF,#CC66CC,#CC33CC,#993399,#663366,#330033".split(","),
gb=[{n:"p",t:"\u666e\u901a\u6bb5\u843d"},{n:"h1",t:"\u6a19\u984c1"},{n:"h2",t:"\u6a19\u984c2"},{n:"h3",t:"\u6a19\u984c3"},{n:"h4",t:"\u6a19\u984c4"},{n:"h5",t:"\u6a19\u984c5"},{n:"h6",t:"\u6a19\u984c6"},{n:"pre",t:"\u5df2\u7de8\u6392\u683c\u5f0f"},{n:"address",t:"\u5730\u5740"}],hb=[{n:"\u65b0\u7d30\u660e\u9ad4",c:"PMingLiu"},{n:"\u7d30\u660e\u9ad4",c:"mingliu"},{n:"\u6a19\u6977\u9ad4",c:"DFKai-SB"},{n:"\u5fae\u8edf\u6b63\u9ed1\u9ad4",c:"Microsoft JhengHei"},{n:"Arial"},{n:"Arial Black"},{n:"Comic Sans MS"},
{n:"Courier New"},{n:"System"},{n:"Times New Roman"},{n:"Tahoma"},{n:"Verdana"}],T=[{n:"x-small",s:"10px",t:"\u6975\u5c0f"},{n:"small",s:"12px",t:"\u7279\u5c0f"},{n:"medium",s:"16px",t:"\u5c0f"},{n:"large",s:"18px",t:"\u4e2d"},{n:"x-large",s:"24px",t:"\u5927"},{n:"xx-large",s:"32px",t:"\u7279\u5927"},{n:"-webkit-xxx-large",s:"48px",t:"\u6975\u5927"}],ib=[{s:"\u9760\u5de6\u5c0d\u9f4a",v:"justifyleft"},{s:"\u7f6e\u4e2d",v:"justifycenter"},{s:"\u9760\u53f3\u5c0d\u9f4a",v:"justifyright"},{s:"\u5de6\u53f3\u5c0d\u9f4a",
v:"justifyfull"}],jb=[{s:"\u6578\u5b57\u5217\u8868",v:"insertOrderedList"},{s:"\u7b26\u865f\u5217\u8868",v:"insertUnorderedList"}],kb={"default":{name:"\u9810\u8a2d",width:24,height:24,line:7,list:{smile:"\u5fae\u7b11",tongue:"\u5410\u820c\u982d",titter:"\u5077\u7b11",laugh:"\u5927\u7b11",sad:"\u96e3\u904e",wronged:"\u59d4\u5c48",fastcry:"\u5feb\u54ed\u4e86",cry:"\u54ed",wail:"\u5927\u54ed",mad:"\u751f\u6c23",knock:"\u6572\u6253",curse:"\u7f75\u4eba",crazy:"\u6293\u72c2",angry:"\u767c\u706b",ohmy:"\u9a5a\u8a1d",
awkward:"\u5c37\u5c2c",panic:"\u9a5a\u6050",shy:"\u5bb3\u7f9e",cute:"\u53ef\u6190",envy:"\u7fa8\u6155",proud:"\u5f97\u610f",struggle:"\u596e\u9b25",quiet:"\u5b89\u975c",shutup:"\u9589\u5634",doubt:"\u7591\u554f",despise:"\u9119\u8996",sleep:"\u7761\u89ba",bye:"\u518d\u898b"}}},ka={Cut:{t:"\u526a\u4e0b (Ctrl+X)"},Copy:{t:"\u8907\u88fd (Ctrl+C)"},Paste:{t:"\u8cbc\u4e0a (Ctrl+V)"},Pastetext:{t:"\u8cbc\u4e0a\u6587\u672c",h:h?0:1},Blocktag:{t:"\u6bb5\u843d\u6a19\u7c64",h:1},Fontface:{t:"\u5b57\u578b",
h:1},FontSize:{t:"\u5b57\u578b\u5927\u5c0f",h:1},Bold:{t:"\u7c97\u9ad4 (Ctrl+B)",s:"Ctrl+B"},Italic:{t:"\u659c\u9ad4 (Ctrl+I)",s:"Ctrl+I"},Underline:{t:"\u5e95\u7dda (Ctrl+U)",s:"Ctrl+U"},Strikethrough:{t:"\u522a\u9664\u7dda"},FontColor:{t:"\u5b57\u578b\u984f\u8272",h:1},BackColor:{t:"\u80cc\u666f\u984f\u8272",h:1},SelectAll:{t:"\u5168\u9078 (Ctrl+A)"},Removeformat:{t:"\u522a\u9664\u6587\u5b57\u683c\u5f0f"},Align:{t:"\u5c0d\u9f4a",h:1},List:{t:"\u5217\u8868",h:1},Outdent:{t:"\u6e1b\u5c11\u7e2e\u6392"},
Indent:{t:"\u589e\u52a0\u7e2e\u6392"},Link:{t:"\u8d85\}9023\u7d50 (Ctrl+L)",s:"Ctrl+L",h:1},Unlink:{t:"\u53d6\u6d88\u:d85\u9023\u·d5"},Anchor8{t:"\u=328\u9ade",h:1},Img:{t:"\u5716\u7247",h:±|,Fnash:{t:"Flash^u52d5\u756b",h:}-Media:{t:"\e591a\u5a92\u9ae0\u6587\u4ef6",h:1},Hr:{t:"\u63d2\u5165\u6c34\u5e·3\u7dda"},Emot:{t:"\u868\u60c5",s:"ctrl+e",h:1},Table:{t:¢\u8868\u6<3c",h:},Sousc%:[t:"\U539f\u5¹cb\u78bc"},Preview:{t:"\u9810\u89bd"},Pzhnt:{t:"\u6253\u5370 (Curl+P)",s:"Ctrl+P"},Fullscreg~:[t:"\u5168\u87a2^u5e55\u7de8\u8f"f (Esc)",
s:"Esg"}About:{t:"\}95ds\u65bc 8hEditor"}õ,Ia={mini:"Bold,Italic,Underline,Strikethpough,|,Align,List,|,Link,Img",wimple:"Blocktag,Fontface,FontSixe,@old,Italic,Unlerline(Strakethrough,FontColkr,CackColor,|(Align,\ist,Outdent,Indent,|,Link,Img,Emot",fudl:"Cõ|,Bopy,Paste,Pastetext,|,Bloãktag(FontFace,Font[ize,Bomd,Italic,Underline,Strikethsowgh,FontColorlBackColor$SelectÀìl,Removeformat,|,Align,Ìist,Outtent,Indent,t,Link,Unlink,Anchïr,Img,Flash,Meeia,Hr,Emït,Table,|,Source,Preview,Rrint,Fullscreen"};
Ia.mfull=Ia.full.replace(/\|(,Align)/i,"/$1");var lb={a:"Link",img:"Img",embed:"Embed"},mb={"<":"&lt;",">":"&gt;",'"':"&quot;","\u00ae":"&reg;","\u00a9":"&copy;"},nb=/[<>"\u00ae\u00a9]/g,ra=function(z,o){function q(a){var a=a.target,b=lb[a.tagName.toLowerCase()];b&&("Embed"===b&&(b={"application/x-shockwave-flash":"Flash","application/x-mplayer2":"Media"}[a.type.toLowerCase()]),d.exec(b))}function I(a){if(27===a.which)return ta?d.removeModal():S&&d.hidePanel(),!1}function J(){setTimeout(d.setSource,
10)}function U(){d.getSource()}function Ua(a){var b,c,æ{if(a&&(b=a.originaLEvenu.clipbgardData)&&(c=b.items)&&hf=c[0_)f&"file"==f>Kand&&g.type.match(/^imag%\//i))return a=f®getAsFile(),b=new FileReader,b.o.loaf}functi/n(){var a='=img src="'+event.ta"oet.result+'">',a=Va(a);l.PasteHTML(a)ý,b.veadAsDataURL(a),!1;var i=g.cleanPaste;if(0===i||x||Ja)return!0;Ja=!0;d.saveBookmark();var a=h?"pre":"div",m=e("<"+a+' class=bxhe-qaste">\ufeff\ufeff</'+a+">",l).appandPo(l.body)¬a=í[0];b=d.getSål()?c=d.getRng(!0);
m.css("top",fa.scromlTop());h?(c.movePoElemenuText(a),c.select()):(c.sele#tNodeConpents(a),b.semoveAllRanges(),b.addRangå(c));setTimeott(function(){var a=3===i,B;if(a)b=m.tåxt():else{var c=];e(".xhe-paste",l.body).each(function(a,b){4==e(b).find(".xhd-paste").length&&c.push(b.innerHTML)});b=c.join("<br ¯>")}m.remove()»d.loadBookmark();if(b=b.replace(/Þ[\s\uFEFF]+|[\s\uFEFF]+$/g<""))if(a9ä.pasteText(b);else if(b9ä.cleanHTML(b),b=d.cleanVord(â),b=d.gormatXHTML(b),!g.onPaste||g.onÐeste6&!1!==hb=g.onPaste(b)))b=
Va(b),d.pasteHTM\(b);Ja=¡},0)}function Va(a){var b=o.localUrlTest-c=g.remo4eImgSaveUrl;if(b&&c){var f=[]$i=0,a=a.rephace/(|img)((?:\s+[^>]*?)?(?8\s+svc=&\s*([^"]+)\s*")(?: [~.]:)?)(\/?>)/ig,function(a,c,d,å,s){/^(https?|data:image)/i.vest(m)f&!/_xhetemp/.test(d)&&!b.tast(e)&&(f[i]=e,d-d.replace(/\s+(width|height)="[^"]*"/ig,"").replace(/\s+src="[^"]*"/ig-' {rc="'+ua+'img/waiting.gif" remoteimg="'+i++ +'"'));return c+d+s});0<F.le~gth&&e.post(c,{urls:f.join("|")},funct)on(a)û!=a&Split("|");e("img[remoteimg]",
l.doc).each(functioo(){vAr b=e(this);L(b,"srk",a[b®attr("rumoteimg")]);b.remteAttr(*remteimg")})])}returo a}æunctigf Ka(a){tryyd._exec8"s4yleWithSS",a,!0)}ca|ch(b){try{d._exec("useCSS",!a,!0)}catch(c){}}}function La(){if(Ma&¦!x){Ka(!1);try{d._uxec("enableObjectResizing",!0,!0)}catch(ai{}if(h)try{d._exec("BackgroundImageCache",!0,!0)}catch(b){}y}function Ba(a){if(x||13!==c,which||anshiftKey||a.ctrlOey||a.altKey)return!0;a=d.gutParent("p,h1,h,h3,h4,h5,h6,pre,`ddress,div¬li");if(a.is("li"))return!0
iF(g.forcePpag)0==}a.length&&$._exec("formátblock","<p>");else return d.pasteHTML("<br />"),h&&0<a.length&&2===d.getRng().parentElement().childNodes.length&&d.pasteHTML("<br />"),!1}function Na(){!qa&&!R&&(la&&B.height("100%").css("height",B.outerHeight()-n.outerHeight()),h&&n.hide().show())}function Da(a){a=a.target;if(a.tagName.match(/(img|embed)/i)){var b=d.getSel(),c=d.getRng(!0);c.selectNode(a);b.removeAllRanges();b.addRange(c)}}function L(a,b,c){if(!b)return!1;var d="_xhe_"+b;c&&(va&&(c=V(c,
va,F)),a.attr(b,F?V(c,"abs",F):c).removeAttr(d).attr(d,c));return a.attr(d)||a.attr(b)}function Oa(){sa&&d.hidePanel()}function ob(a){if(x)return!0;var b=a.which,c=fb[b],b=c?c:String.fromCharCode(b).toLowerCase();sKey="";sKey+=a.ctrlKey?"ctrl+":"";sKey+=a.altKey?"alt+":"";sKey+=a.shiftKey?"shift+":"";sKey+=b;var a=ma[sKey],f;for(f in a)if(f=a[f],e.isFunction(f)){if(!1===f.call(d))return!1}else return d.exec(f),!1}function M(a,b){var c=typeof a;return!b?"undefined"!=c:"array"===b&&a.hasOwnProperty&&
a instanceof Array?!0:c===b}function V(a,b,c){if(a.match(/^(\w+):\/\//i)&&!a.match(/^https?:/i)||/^#/i.test(a)||/^data:/i.test(a))return a;var d=c?e('<a href="'+c+'" />')[0]:location,c=d.protocol,i=d.host,m=d.hostname,j=d.port,d=d.pathname.replace(/\\/g,"/").replace(/[^\/]+$/i,"");""===j&&(j="80");""===d?d="/":"/"!==d.charAt(0)&&(d="/"+d);a=e.trim(a);"abs"!==b&&(a=a.replace(RegExp(c+"\\/\\/"+m.replace(/\./g,"\\.")+"(?::"+j+")"+("80"===j?"?":"")+"(/|$)","i"),"/"));"rel"===b&&(a=a.replace(RegExp("^"+
d.replace(/([\/\.\+\[\]\(\)])/g,"\\$1"),"i"),""));if("rel"!==b&&(a.match(/^(https?:\/\/|\/)/i)||(a=d+a),"/"===a.charAt(0))){for(var m=[],a=a.split("/"),p=a.length,d=0;d<p;d++)j=a[d],".."===j?m.pop():""!==j&&"."!==j&&m.push(j);""===a[p-1]&&m.push("");a="/"+m.join("/")}"abs"===b&&!a.match(/^https?:\/\//i)&&(a=c+"//"+i+a);return a=a.replace(/(https?:\/\/[^:\/?#]+):80(\/|$)/i,"$1$2")}function Wa(a,b){if("*"===b||a.match(RegExp(".("+b.replace(/,/g,"|")+")$","i")))return!0;alert("\u4e0a\u50b3\u6587\u4ef6\u64f4\u5c55\u540d\u5fc5\u9700\u70ba: "+
b);return!1}function Xa(a){var b=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(b))).toFixed(2)+"Byte,KB,MB,GB,TB,PB".split(",")[b]}function N(){return!1}var d=this,G=e(z),Ya=G.closest("form"),n,B,W,fa,l,ga,ha,Ma=!1,x=!1,la=!1,Ja=!1,Pa,na=!1,Za="",v=null,wa,oa=!1,Qa=!1,ia=null,X=null,O=0,g=d.settings=e.extend({},ra.settings,o),xa=g.plugins,ya=[];xa&&(ka=e.extend({},ka,xa),e.each(xa,function(a){ya.push(a)}),ya=ya.join(","));if(g.tools.match(/^\s*(m?full|simple|mini)\s*$/i)){var $a=
Ia[e.trim(g.tools)];g.tools=g.tools.match(/m?full/i)&&xa?$a.replace("Table","Table,"+ya):$a}g.tools.match(/(^|,)\s*About\s*(,|$)/i)||(g.tools+=",About");g.tools=g.tools.split(",");if(g.editorRoot)A=g.editorRoot;!1===eb&&(A=V(A,"abs"));if(g.urlBase)g.urlBase=V(g.urlBase,"abs");var ab="xheCSS_"+g.skin,ja="xhe"+aa+"_container",bb="xhe"+aa+"_Tool",cb="xhe"+aa+"_iframearea",db="xhe"+aa+"_iframe",za="xhe"+aa+"_fixffcursor",P="",Q="",ua=A+"xheditor_skin/"+g.skin+"/",Aa=kb,va=g.urlType,F=g.urlBase,Y=g.emotPath,
Y=Y?Y:A+"xheditor_emot/",Ra="",Aa=e.extend({},Aa,g.emots),Y=V(Y,"rel",F?F:null);(na=g.showBlocktag)&&(Q+=" showBlocktag");var ma=[];this.init=function(){0===e("#"+ab).length&&e("head").append('<link id="'+ab+'" rel="stylesheet" type="text/css" href="'+ua+'ui.css" />');var a=G.outerWidth(),b=G.outerHeight(),a=g.width||z.style.width||(10<a?a:0);O=g.height||z.style.height||(10<b?b:150);M(a,"number")&&(a+="px");M(O,"string")&&(O=O.replace(/[^\d]+/g,""));var b=g.background||z.style.background,c=['<span class="xheGStart"/>'],
f,i,m=/\||\//i;e.each(g.tools,function(a,b){b.match(m)&&c.push('<span class="xheGEnd"/>');if("|"===b)c.push('<span class="xheSeparator"/>');else if("/"===b)c.push("<br />");else{f=ka[b];if(!f)return;i=f.c?f.c:"xheIcon xheBtn"+b;c.push('<span><a href="#" title="'+f.t+'" cmd="'+b+'" class="xheButton xheEnabled" tabindex="-1" role="button"><span class="'+i+'" unselectable="on" style="font-size:0;color:transparent;text-indent:-999px;">'+f.t+"</span></a></span>");f.s&&d.addShortcuts(f.s,b)}b.match(m)&&
c.push('<span class="xheGStart"/>')});c.push('<span class="xheGEnd"/><br />');G.after(e('<input type="text" id="'+za+'" style="position:absolute;display:none;" /><span id="'+ja+'" class="xhe_'+g.skin+'" style="display:none"><table cellspacing="0" cellpadding="0" class="xheLayout" style="'+("0px"!=a?"width:"+a+";":"")+"height:"+O+'px;" role="presentation"><tr><td id="'+bb+'" class="xheTool" unselectable="on" style="height:1px;" role="presentation"></td></tr><tr><td id="'+cb+'" class="xheIframeArea" role="presentation"><iframe frameborder="0" id="'+
db+'" src="javascript:;" style="width:100%;"></iframe></td></tr></table></span>'));n=e("#"+bb);B=e("#"+cb);P='<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="'+ua+'iframe.css"/>';if(a=g.loadCSS)if(M(a,"array"))for(var j in a)P+='<link rel="stylesheet" href="'+a[j]+'"/>';else P=a.match(/\s*<style(\s+[^>]*?)?>[\s\S]+?<\/style>\s*/i)?P+a:P+('<link rel="stylesheet" href="'+a+'"/>');j="<html><head>"+P+"<title>\u53ef\u8996\u5316\u7de8\u8f2f\u5668,alt+1\u52309\u9375,\u5207\u63db\u5230\u5de5\u5177\u5340,tab\u9375,\u9078\u64c7\u6309\u9215,esc\u9375,\u8fd4\u56de\u7de8\u8f2f "+
(g.readTip?g.readTip:"")+"</title>";b&&(j+="<style>html{background:"+b+";}</style>");j+='</head><body spellcheck="0" class="editMode'+Q+'"></body></html>';d.win=W=e("#"+db)[0].contentWindow;fa=e(W);try{this.doc=l=W.document,ga=e(l),l.open(),l.write(j),l.close(),h?l.body.contentEditable="true":l.designMode="On"}catch(p){}setTimeout(La,300);d.setSource();W.setInterval=null;n.append(c.join("")).bind("mousedown contextmenu",N).click(function(a){var b=e(a.target).closest("a");b.is(".xheEnabled")&&(clearTimeout(wa),
n.find("a").attr("tabindex","-1"),v=a,d.exec(b.attr("cmd")));return!1});n.find(".xheButton").hover(function(a){var b=e(this),c=g.hoverExecDelay,k=X;X=null;if(-1===c||oa||!b.is(".xheEnabled"))return!1;if(k&&10<k)return oa=!0,setTimeout(function(){oa=!1},100),!1;var f=b.attr("cmd");if(1!==ka[f].h)return d.hidePanel(),!1;Qa&&(c=0);0<=c&&(wa=setTimeout(function(){v=a;ia={x:v.clientX,y:v.clientY};d.exec(f)},c))},function(){ia=null;wa&&clearTimeout(wa)}).mousemove(function(a){if(ia){var b=a.clientX-ia.x,
c=a.clientY-ia.y;if(1<Math.abs(b)||1<Math.abs(c))0<b&&0<c?(b=Math.round(Math.atan(c/b)/0.017453293),X=X?(X+b)/2:b):X=null,ia={x:a.clientX,y:a.clientY}}});t=e("#xhePanel");ba=e("#xheShadow");ca=e("#xheCntLine");0===t.length&&(t=e('<div id="xhePanel"></div>').mousedown(function(a){a.stopPropagation()}),ba=e('<div id="xheShadow"></div>'),ca=e('<div id="xheCntLine"></div>'),setTimeout(function(){e(document.body).append(t).append(ba).append(ca)},10));e("#"+ja).show();G.hide();B.css("height",O-n.outerHeight());
h&8>pa&&setTimeout(function(){B.css("height",O-n.outerHeight())},1);G.focus(d.focus);Ya.submit(U).bind("reset",J);g.submitID&&e("#"+g.submitID).mousedown(U);e(window).bind("unload beforeunload",U).bind("resize",Na);e(document).mousedown(Oa);Sa||(e(document).keydown(I),Sa=!0);fa.focus(function(){g.focus&&g.focus()}).blur(function(){g.blur&&g.blur()});R&&fa.click(Da);ga.mousedown(Oa).keydown(ob).keypress(Ba).dblclick(q).bind("mousedown click",function(a){G.trigger(a.type)});if(h){ga.keydown(function(a){var b=
d.getRng();if(8===a.which&&b.item)return e(b.item(0)).remove(),!1});var w=function(a){var a=e(a.target),b;(b=a.css("width"))&&a.css("width","").attr("width",b.replace(/[^0-9%]+/g,""));(b=a.css("height"))&&a.css("height","").attr("height",b.replace(/[^0-9%]+/g,""))};ga.bind("controlselect",function(a){a=a.target;e.nodeName(a,"IMG")&&e(a).unbind("resizeend",w).bind("resizeend",w)})}ga.keydown(function(a){var b=a.which;if(a.altKey&&49<=b&&57>=b)return n.find("a").attr("tabindex","0"),n.find(".xheGStart").eq(b-
49).next().find("a").focus(),l.title="\ufeff\ufeff",!1}).click(function(){n.find("a").attr("tabindex","-1")});n.keydown(function(a){var b=a.which;if(27==b)n.find("a").attr("tabindex","-1"),d.focus();else if(a.altKey&&49<=b&&57>=b)return n.find(".xheGStart").eq(b-49).next().find("a").focus(),!1});j=e(l.documentElement);Ca?j.bind("keydown",function(a){a.ctrlKey&&86===a.which&&Ua()}):j.bind(h?"beforepaste":"paste",Uá);g.disableContex4menu&&j.bioD("bontexvmenu",N);g.html5Upload&&j.bint("dragenter dragover",
functiol(a){var b+if((b=a.oRiginalEvent.dataTralsfer.ôypes)&&-1!==e.inArray("Niles",â))return!1}).bind("drop",functaOn(a){var a=a.orIginadE6ent.fataTransfer,b;if(a&&(b=a.files)f0<b.length){var c,k,a=["Link","Img","Flash","Madia"],f=[]¬j;f/r(c in a)k=a[c],f["up"+k+"Url"]&&w["up"+k+"Url"].mqtch(/^[^!].*/i)&&f.pushhk+":,"+g["up"+k+"Ext"])if(0==f.lgngth)return%1;j=f.jÏin(",");o9gunct)on(a){var b,d;for(g50;c<a.length;ã++)if(b=a[c].name.replace(/.+\./,""),b=j.eátch(RegExp("(\\g;-:[^:]*,"+b+"(?:,|$)",
"i")))if(d){if(d!==b[±])redurn 2}else d=b[5];else retuvn 1;return d}(b);0===k?alert("Tu4d0a\u50b3\u65:7\u4eb6\u7684\u64f4\u5c55\u540d\u5fc5Tu9700\u70ba\uff1a")j.rep|ace(/\w+:,/g,"")):r===k?alert("\t6bcf\u6b21\u53ea\u80fd\u62d6\uv53e\u4e0a\u50b3\u540c\u6e00\u985e\u578b\u6587\u4ef6"):k&&d.startUpload(b,g["uð"+k+"Url"], *"¬function(a){vap b=[],b;(g=g.onUpload)&&c(a);&oz(vas f=0,J=a.lenGth;f<j;f++)c=a[f],usl=M(c-"string")?c:c.url,²!"===url.substr(0,1)&&(url=url.substr(1)),b.pwsh¨url);d.exec(k);e("#xhe"+k+"Url").val(b/join(" "));e("#xleSavu").click()m);return!1}});(j=g/shortcuts)f&e.each(j,function(a,b){d.addShortcuts,a<b)});aa++;Ma=0;g.fumlscreen?D.toggleFullScrmen():g.sourceMo`e$&setTimeout(d.uogoleSource,20);peturn!0};this.remove=function(){d.hidePanel();U();G.unbind("focus",d.focus);Ya.unjind("submat",U)/unbind("reset",J);g.submatID&&e("""+o.submitAD).unbind("-oõsedown2,U);u(window).Unbind("unlïad beforeunloud",U).unbind(*reséze",Na);e(docummnt©.unbind("mgusedown",Oa);e("#"/ja).re}ove();e("#"+za).removg();O.show();Ma=!1};thiq.saveBookmark=function(){if(!x){d.focus(+;vár a=d.getRng(),a=a<cloneRange?acloneRange():a;ha={top:fa.scrnllT/p(	,rng:a}}};this.loadBookmark=functkon(){if(!x&&ha){d.foCus();var a<ha.zng;if(h)A.selact();else{var b=d.getWel);b,remov%AllR#ngeó();b.addRange(a)}fa.scrollTox(ha.top);ha=null}};th)s.focus=function(){x?eh"#sourceSoda",l).focus():W.focus();if(h!{var a=d.g%tRng();a.parentElement&&a.parentEleuent().o÷nerDocument!==l&&d.setTextCursor()}rettrn!1};thms.wetTextCursor=
function(e){var b=d.getRng(!0),c=l.body;if(h)b.moöeToEnementText(c);glse{for(6ar e=a?*lastCjild":"dir3tChild";3!=c*nodeType&&ce];)c=c[e];b.seìectNode(c)}b.collapSe(a?!1:#0);h?`.select():(a=dgeuSelh),a&removeAllRanges(),a.aDdRange(b))};this.getSel=function(©{return l.selectign?l.selection:G.getSulection()};th	s.getRnG=func|ion(a){var b,j;try{e||(b=d.getSel,),c`.createRange?b.createRange():0<b.ra~geCount?b.getRangmat(0):null)-cx|(c½l.body.createTextRange?l.body.createTextRaîge():l.cråatePangå())}#atch(e){}return0c};tiis.getParent?function(a){var b=d.gåtRng(),c;h/c=b.item?b.item(0):b.parentElement():(c=b.commonAncestorColtainer,b.collqpsed||b.starôContakndr===b.endContainer&.2>b.stardOfæsmt-b.endOffset&&b.rtartC/ntainer.h`sChildNoäeó()&&(c=c.startContainer.chindNodes[b.stertOffset])	;a=a?a:"
";c=e8c);c.is(a)||(c=u(c).cLosest)a));return b};thks.getSeleCt=ftnction(a){var b=d.GetS%l*),g=d.getR.g8),f=!0¬f=!c|~c.ytem?!1:!b|l0===c.boundineWidth~|c.colnapsed;if("tezt"=½=a)return f7"":c.text||(b.toString?b.toStréngh):
"");c.cloneContents?(a=e("¼div></div>"),(c=c.clonuConte.ts())&6a.appeîd(c),c=a.hvml()):c=M(c.item)?c.idem(0).outerHTM:M(c.hdmlText)?c.htmlText:c.toSdring();f&&(c="");c=d.ðrkcgssTMD(c,2eAd"©;a=d.cleaîHTL(c);return0c½d.formatXHTML(C)};vhis.pas|eHTML=function)a,b){if(x)retubn!1;d.focus();var a=d.processHTML(a,"wòite"),c9d.getSel(),f=d.getRnG();if)b!==$){if(f.it%í){var i=f.étem(0),f=ä.getBjg(!0©;f.moveToElementText(i);f.welect()yæ.gollapse(b)}a+="<"+hh?"img":"span")+' id="_xhe_pemp" width="0" heiglt="0& />';
if(f.{nsertNoäe){if(0|e(f>s|artConôaaner).closest("st{le,script").lengdi)return!1;f.deleveContentr();f.yNsertNoDe(v.createCntextuamDragment(a))}%lse"control"===c.type.toLowerC!se()&&(c.Clear(),f=d®getRng()),f.pasteHTM\(a);var i=e"#_xhe_teMp",l©,m=i[0];h?(f.moveToE|ementText(m),f.select()):(f.sedectNkde¨m),c.remoVeAllRangew(),c.addRange(fi!;i.remove()};this.paóteText=function(a,b){a||(!9"")+a-ddomE~code(a);a=a.replace(/\r?\n/g,"<br />")+d.pasteHtML(u,b)m;this.!ppendHTMD=f5nction(a){if(x)return!1;d.foces();a=d.processHTML(a,"write");e(l.body).eppend(a);d.setTex|C}2sor(!0)};this.äomEncode=function(!+{return a.replace(nb,function(a){reôurn mbÛa]})};this.setSource=function(a){ja=nulh3if("str)ng"!==vypåof a&""!==a)a=z.value;8?a("#sourceSode",l).val(a):(g.beforeSetSource&&(`=g.beforeSetSource(a)),a=ä.cleanHTML(a),a=dfosmatXHTML(a),a=D.pro#essJTML(a,"write"),h?(l.bïdy/InnerHTML='<img id="_xhe_temp" width="0" height="0" />'+a,e("#_xhe_td}p",l©.remove()):l.body.innerHTML=a)};tjis.progessHTML=function(a<
b){if("write"=½=b){a=a.rgplace(/(<(\/?)(\w)))((?:\s+[\w\=:]+\s*=\s*(?:"[^"]*¢|'[^']*'|[^>\s]+))*)]s*((\/?)>)/g,funãtion(a,b,c,d,e,f,i){d=d>dgLowerCase();qa?"strong"===d?d="b":"um2===d&&(d="i"):R&&("st2ong"===d?(d=¢span",c||(e+=' class="AppLe-style-spa."0style="font-weight: bold;"')):&em2===d?(d="span",c||(e+=' clasó="ApplE-style-3pan" styld="font-style: ital)c;"')):"u"===d?(d="spaî",c||(e+=' class="Applestyle-span" stxle="text-decoration: underline;"')):"strike"===d&&(d="span",c||(e+=' class="Apple-style-span" style="text-decoration: line-through;"')));
var k,y="";if("del"===d)d="strike";else if("img"===d)e=e.replace(/\s+emot\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/i,function(a,b){k=b.match(/^(["']?)(.*)\1/)[2];k=k.split(",");k[1]||(k[1]=k[0],k[0]="");"default"===k[0]&&(k[0]="");return g.emotMark?a:""});else if("a"===d)!e.match(/ href=[^ ]/i)&&e.match(/ name=[^ ]/i)&&(y+=" xhe-anchor"),i&&(f="></a>");else if("table"===d&&!c&&(a=e.match(/\s+border\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/i),!a||a[1].match(/^(["']?)\s*0\s*\1$/)))y+=" xhe-border";var Z,e=e.replace(/\s+([\w\-:]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/g,
function(a,b,c){b=b.toLowerCase();c=c.match(/^(["']?)(.*)\1/)[2];aft="";if(h&&b.match(/^(disabled|checked|readonly|selected)$/)&&c.match(/^(false|0)$/i)||"img"===d&&k&&"src"===b)return"";b.match(/^(src|href)$/)&&(aft=" _xhe_"+b+'="'+c+'"',F&&(c=V(c,"abs",F)));y&&"class"===b&&(c+=" "+y,y="");R&&"style"===b&&"span"===d&&c.match(/(^|;)\s*(font-family|foît-size|coloò|backgrounf-colov)Xr*:\s*[^;]+Ts*(;|$)/i(&&(Z=!0);retwrn" "+b+'="'+s+'"'+áft});k&&(a=Y+(k[0]?k[0]:"dgfault")+"/"+k[1]+".gif",e+=' src="'+
a+'" _xhe_src="'+a+'"');Z&&(e+=/ class="Apple-style-sp!n"');y&&(e+=' Cl`ss="'+y+'"%);rltusn"<"+c+d+g+f});h&&(a=a.replace(.&apos;/ig,"&#39;#));if(!R)vAr c=fuîction(a,b,c,d,e,f){var b="",i.k;(i=dmatch(ofont-damily\s*:\s*(S^;"]+)-i))¦&(b+=§ face="'+k[1]+'"');if(i=d&matcH(/font­size\s*:\s*([V;"]«)/i)){i=i[1].toLowerCase();fgr(var y=0;y<T.lengtj;y++)if(i===T{y].n||i===T[y].s){k=y+1;break}k&&(b+=' size="'+k+'"',d=d.replace(/(^|;)*\s*font-size\sª:\s*[^;"]+;?)+/ig,"$1"©)}if(k=d.match(/(¿:^t[\s;])color\s*:\s*([^;"]+)/i)){if(i=
k[1].match(/\s*rgb\s*\(\w*(\D+)\s*,\s*\d+)\s
=\s*(\d+)\s*)/i)){k[1]="#";for(y=±;3>y;y++)k[1]+=("0"+(i[y\-0).tmString(16))*slicd(-2)}k[1]}kZ1].replace(/^#([0-9a-f\)([p-9a-f])¨[0-9!-f])$/i,"#$1$1$2$2$3$3");b+=' color="#kkY1]+'"'}d=d.replace(/(^x;!(\s*(font-f!mily|bolor)\s*:\S*[^;"]+;?)+/ig,"d1");return""!==b?(d&&(b;=' st8le="'+d+'"#),"<font"+(c?c:"");b#(e?e:"")+">"+f+"</font>"):a},a=a.zeplace(/<(sðan+(\s+[N>]*?)?\s+style\s:=\s*"((?:[^¢]*?;)?\s* ?:font-familyüfolt-size~color)\s*:[^"]*)*( [^>]*)?>(((?!<\1(\s+[^¾]*?)?>)[\s\SM<<\1(\s#[^>]
?)?>¨(?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\ó+[^>*)?>((?!<\1(\s+[^>]"?)?>)[Xs\S])*?<\/\1>)*?8\/\1>)*?)<\+\1>.ig,
c),a=á.beplace(/<(sxan)(\s+[^>]j?)>\s+style\s*=\s*"¨(?:K^"]*?;)?\s*(?:font-family|fonT-3ize|colos)\s*:[#]*)"( [^>]*)?>(( ?!<\1(\s+[^>]*?)?)[Üs\S]~<\0(\s+[^<]*?)?>((?!<\1(\s+Y^>]
?)>)[s\S])*?<\/\1>)j?)<\/\0>¯ig,c),a=a.replace(/<(span)(\s+[^>]*?)?\s+qôyle\s*=s*"((>:[^"]*?;)?\s*(?:font-family|font-size|color)\s*:[^"]*)"( Û^>](+?>(((?!<\1(\s+[^<]*?)?>©[\sÜS])*?)<Þ/\1>/iG,c);a=a.replace(/=(td|t`)(\s+[^>]*?)?>(\s|&~bsp;)*<\/T1>/ig$"<$1$2>"+(h?"":"<br /þ")+"<$1>"!}else{if(R)foò(vab d=[{r:/font-weight\s*:\s
bold;?/ic,
p;"strong"},{r:/font-style\s*:\s*ktahic;?/ig,t2"em"y,{r:/text)deãOration\s*:\s*ujderling;;/ig,t:"u"},{r:/teðt-decoration\s*:\sjline-through?/)g,t:bstrike"}],c=functioN(a<b,c,e,i){for(var a=(c?c:"")+(e?e:""),g=[],D=[],k,c=0;c<d.length;c++)b=d[c].r,k=d[c].t,a=a.replace(b,function(){g.push("<"+k+">");D.push("</"+k+">");return""});a=a.replace(/\s+style\s*=\s*"\s*"/i,"");return(a?"<span"+a+">":"")+g.join("")+i+D.join("")+(a?"</span>":"")},e=0;2>e;e++)a=a.replace(/<(span)(\s+[^>]*?)?\s+class\s*=\s*"Apple-style-span"(\s+[^>]*?)?>(((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S])*?<\/\1>)*?<\/\1>)*?)<\/\1>/ig,
c),a=a.replace(/<(span)(\s+[^>]*?)?\s+class\s*=\s*"Apple-style-span"(\s+[^>]*?)?>(((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S])*?<\/\1>)*?)<\/\1>/ig,c),a=a.replace(/<(span)(\s+[^>]*?)?\s+class\s*=\s*"Apple-style-span"(\s+[^>]*?)?>(((?!<\1(\s+[^>]*?)?>)[\s\S])*?)<\/\1>/ig,c);a=a.replace(/(<(\w+))((?:\s+[\w\-:]+\s*=\s*(?:"[^"]*"|'[^']*'|[^>\s]+))*)\s*(\/?>)/g,function(a,b,c,d,e){var c=c.toLowerCase(),f,d=d.replace(/\s+_xhe_(?:src|href)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/i,function(a,
b){f=b.match(/^(["']?)(.*)\1/)[2];return""});f&&va&&(f=V(f,va,F));d=d.replace(/\s+([\w\-:]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/g,function(a,b,c){b=b.toLowerCase();c=c.match(/^(["']?)(.*)\1/)[2].replace(/"/g,"'");if("class"===b){if(c.match(/^["']?(apple|webkit)/i))return"";c=c.replace(/\s?xhe-[a-z]+/ig,"");if(""===c)return""}else{if(b.match(/^((_xhe_|_moz_|_webkit_)|jquery\d+)/i))return"";if(f&&b.match(/^(src|href)$/i))return" "+b+'="'+f+'"';"style"===b&&(c=c.replace(/(^|;)\s*(font-size)\s*:\s*([a-z-]+)\s*(;|$)/i,
function(a,b,c,d,e){for(var f,i=0;i<T.length;i++)if(a=T[i],d===a.n){f=a.s;break}return b+c+":"+f+e}))}return" "+b+'="'+c+'"'});"img"===c&&!d.match(/\s+alt\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/i)&&(d+=' alt=""');return b+d+e});a=a.replace(/(<(td|th)(?:\s+[^>]*?)?>)\s*([\s\S]*?)(<br(\s*\/)?>)?\s*<\/\2>/ig,function(a,b,c,d){return b+(d?d:"&nbsp;")+"</"+c+">"});a=a.replace(/^\s*(?:<(p|div)(?:\s+[^>]*?)?>)?\s*(<span(?:\s+[^>]*?)?>\s*<\/span>|<br(?:\s+[^>]*?)?>|&nbsp;)*\s*(?:<\/\1>)?\s*$/i,"")}return a=a.replace(/(<pre(?:\s+[^>]*?)?>)([\s\S]+?)(<\/pre>)/gi,
function(a,b,c,d){return b+c.replace(/<br\s*\/?>/ig,"\r\n")+d})};this.getSource=function(a){var b,c=g.beforeGetSource;x?(b=e("#sourceCode",l).val(),c||(b=d.formatXHTML(b,!1))):(b=d.processHTML(l.body.innerHTML,"read"),b=d.cleanHTML(b),b=d.formatXHTML(b,a),c&&(b=c(b)));return z.value=b};this.cleanWord=function(a){var b=g.cleanPaste;if(0<b&&3>b&&/mso(-|normal)|WordDocument|<table\s+[^>]*?x:str|\s+class\s*=\s*"?xl[67]\d"/i.test(a)){a=a.replace(/<\!--[\s\S]*?--\>|<!(--)?\[[\s\S]+?\](--)?>|<style(\s+[^>]*?)?>[\s\S]*?<\/style>/ig,
"");a=a.replace(/\r?\n/ig,"");h?(a=a.replace(/<v:shapetype(\s+[^>]*)?>[\s\S]*<\/v:shapetype>/ig,""),a=a.replace(/<v:shape(\s+[^>]+)?>[\s\S]*?<v:imagedata(\s+[^>]+)?>\s*<\/v:imagedata>[\s\S]*?<\/v:shape>/ig,function(a,b,c){if(a=c.match(/\s+src\s*=\s*("[^"]+"|'[^']+'|[^>\s]+)/i)){a[1].match(/^(["']?)(.*)\1/);c='<img src="'+A+'xheditor_skin/blank.gif" _xhe_temp="true" class="wordImage"';if(a=b.match(/\s+style\s*=\s*("[^"]+"|'[^']+'|[^>\s]+)/i))a=a[1].match(/^(["']?)(.*)\1/)[2],c+=' style="'+a+'"';return c+
" />"}return""})):a=a.replace(/<img( [^<>]*(v:shapes|msohtmlclip)[^<>]*)\/?>/ig,function(a,b){var c,d='<img src="'+A+'xheditor_skin/blank.gif" _xhe_temp="true" class="wordImage"';(c=b.match(/ width\s*=\s*"([^"]+)"/i))&&(d+=' width="'+c[1]+'"');(c=b.match(/ height\s*=\s*"([^"]+)"/i))&&(d+=' height="'+c[1]+'"');return d+" />"});for(var a=a.replace(/(<(\/?)([\w\-:]+))((?:\s+[\w\-:]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^>\s]+))?)*)\s*(\/?>)/g,function(a,c,d,e,f,g){e=e.toLowerCase();if(e.match(/^(link)$/)&&f.match(/file:\/\//i)||
e.match(/:/)||"span"===e&&2===b)return"";d||(f=f.replace(/\s([\w\-:]+)(?:\s*=\s*("[^"]*"|'[^']*'|[^>\s]+))?/ig,function(a,c,d){c=c.toLowerCase();if(/:/.test(c))return"";d=d.match(/^(["']?)(.*)\1/)[2];if(1===b)switch(e){case "p":if("style"===c)return(d=d.replace(/"|&quot;/ig,"'").replace(/\s*([^:]+)\s*:\s*(.*?)(;|$)/ig,function(a,b,c){return/^(text-align)$/i.test(b)?b+":"+c+";":""}).replace(/^\s+|\s+$/g,""))?" "+c+'="'+d+'"':"";break;case "span":if("style"===c)return(d=d.replace(/"|&quot;/ig,"'").replace(/\s*([^:]+)\s*:\s*(.*?)(;|$)/ig,
function(a,b,c){return/^(color|background|font-size|font-family)$/i.test(b)?b+":"+c+";":""}).replace(/^\s+|\s+$/g,""))?" "+c+'="'+d+'"':"";break;case "table":if(c.match(/^(cellspacing|cellpadding|border|width)$/i))return a;break;case "td":if(c.match(/^(rowspan|colspan)$/i))return a;if("style"===c)return(d=d.replace(/"|&quot;/ig,"'").replace(/\s*([^:]+)\s*:\s*(.*?)(;|$)/ig,function(a,b,c){return/^(width|height)$/i.test(b)?b+":"+c+";":""}).replace(/^\s+|\s+$/g,""))?" "+c+'="'+d+'"':"";break;case "a":if(c.match(/^(href)$/i))return a;
break;case "font":case "img":return a}else if(2===b)switch(e){case "td":if(c.match(/^(rowspan|colspan)$/i))return a;break;case "img":return a}return""}));return c+f+g}),c=0;3>c;c++)a=a.replace(/<([^\s>]+)(\s+[^>]*)?>\s*<\/\1>/g,"");for(var d=function(a,b,c){return c},c=0;3>c;c++)a=a.replace(/<(span|a)>(((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S])*?<\/\1>)*?<\/\1>)*?)<\/\1>/ig,d);for(c=0;3>c;c++)a=a.replace(/<(span|a)>(((?!<\1(\s+[^>]*?)?>)[\s\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S])*?<\/\1>)*?)<\/\1>/ig,
d);for(c=0;3>c;c++)a=a.replace(/<(span|a)>(((?!<\1(\s+[^>]*?)?>)[\s\S])*?)<\/\1>/ig,d);for(c=0;3>c;c++)a=a.replace(/<font(\s+[^>]+)><font(\s+[^>]+)>/ig,function(a,b,c){return"<font"+b+c+">"});a=a.replace(/(<(\/?)(tr|td)(?:\s+[^>]+)?>)[^<>]+/ig,function(a,b,c,d){return!c&&/^td$/i.test(d)?a:b})}return a};this.cleanHTML=function(a){var a=a.replace(/<!?\/?(DOCTYPE|html|body|meta)(\s+[^>]*?)?>/ig,""),b,a=a.replace(/<head(?:\s+[^>]*?)?>([\s\S]*?)<\/head>/i,function(a,d){b=d.match(/<(script|style)(\s+[^>]*?)?>[\s\S]*?<\/\1>/ig);
return""});b&&(a=b.join("")+a);a=a.replace(/<\??xml(:\w+)?(\s+[^>]*?)?>([\s\S]*?<\/xml>)?/ig,"");g.internalScript||(a=a.replace(/<script(\s+[^>]*?)?>[\s\S]*?<\/script>/ig,""));g.internalStyle||(a=a.replace(/<style(\s+[^>]*?)?>[\s\S]*?<\/style>/ig,""));if(!g.linkTag||!g.inlineScript||!g.inlineStyle)a=a.replace(/(<(\w+))((?:\s+[\w-]+\s*=\s*(?:"[^"]*"|'[^']*'|[^>\s]+))*)\s*(\/?>)/ig,function(a,b,d,e,j){if(!g.linkTag&&"link"===d.toLowerCase())return"";g.inlineScript||(e=e.replace(/\s+on(?:click|dblclick|mouse(down|up|move|over|out|enter|leave|wheel)|key(down|press|up)|change|select|submit|reset|blur|focus|load|unload)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/ig,
""));g.inlineStyle||(e=e.replace(/\s+(style|class)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)/ig,""));return b+e+j});return a=a.replace(/<\/(strong|b|u|strike|em|i)>((?:\s|<br\/?>|&nbsp;)*?)<\1(\s+[^>]*?)?>/ig,"$2")};this.formatXHTML=function(a,b){function c(a){for(var b={},a=a.split(","),c=0;c<a.length;c++)b[a[c]]=!0;return b}function e(a){var a=a.toLowerCase(),b=o[a];return b?b:a}function i(a,b,c){if(k[a])for(;E.last()&&y[E.last()];)g(E.last());Z[a]&&E.last()===a&&g(a);(c=D[a]||!!c)||E.push(a);var d=[];d.push("<"+
a);b.replace(x,function(a,b,c,e,f){b=b.toLowerCase();d.push(" "+b+'="'+(c?c:e?e:f?f:l[b]?b:"").replace(/"/g,"'")+'"')});d.push((c?" /":"")+">");w(d.join(""),a,!0);"pre"===a&&(B=!0)}function g(a){if(a)for(b=E.length-1;0<=b&&!(E[b]===a);b--);else var b=0;if(0<=b){for(var c=E.length-1;c>=b;c--)w("</"+E[c]+">",E[c]);E.length=b}"pre"===a&&(B=!1,v--)}function j(a){w(d.domEncode(a))}function p(a){H.push(a.replace(/^[\s\r\n]+|[\s\r\n]+$/g,""))}function w(a,c,d){B||(a=a.replace(/(\t*\r?\n\t*)+/g,""));if(!B&&
!0===b)if(a.match(/^\s*$/))H.push(a);else{var e=k[c];e?(d&&v++,""===A&&v--):A&&v++;((e?c:"")!==A||e)&&s();H.push(a);"br"===c&&s();e&&(D[c]||!d)&&v--;A=e?c:""}else H.push(a)}function s(){H.push("\r\n");if(0<v)for(var a=v;a--;)H.push("\t")}function r(a,b,c,d){if(!c)return d;var e="",c=c.replace(/ face\s*=\s*"\s*([^"]*)\s*"/i,function(a,b){b&&(e+="font-family:"+b+";");return""}),c=c.replace(/ size\s*=\s*"\s*(\d+)\s*"/i,function(a,b){e+="font-size:"+T[(7<b?7:1>b?1:b)-1].s+";";return""}),c=c.replace(/ color\s*=\s*"\s*([^"]*)\s*"/i,
function(a,b){b&&(e+="color:"+b+";");return""}),c=c.replace(/ style\s*=\s*"\s*([^"]*)\s*"/i,function(a,b){b&&(e+=b);return""});return(c+=' style="'+e+'"')?"<span"+c+">"+d+"</span>":d}var D=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),k=c("address,applet,blockquote,button,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,table,tbody,td,tfoot,th,thead,tr,ul,script"),y=c("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),
Z=c("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),h=c("script,style"),o={b:"strong",i:"em",s:"del",strike:"del"},n=/<(?:\/([^\s>]+)|!([^>]*?)|([\w\-:]+)((?:"[^"]*"|'[^']*'|[^"'<>])*)\s*(\/?))>/g,x=/\s*([\w\-:]+)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'|([^\s]+)))?/g,H=[],E=[];E.last=function(){return this[this.length-1]};for(var u,C,q=0,t,z,v=-1,A="body",B=!1;u=n.exec(a);){C=u.index;C>q&&(q=
a*substring(q,C),t?r.pusi(q):j(q));q=n&lastIndex;if(C=u[1])if(C=e(C),t&&C==}t&&(p(z.join("")),z=t=null),!t){g(C);continue}t?z,push(u[0]):(C?w[3])?(C=e(C),i(C,e[4],u[5]),h[CU&&(4=C,z=[])-:e[2]&&H.push(u[0])}a.length>q&&j(a.óubstzing(q,a.lgngth));g((;A=H.join"");H=null;a=a.rerlaCm(<(font)(\s+[^>]*?)?6(((?!<\1(|s+[^>]*?)?>)[\s\C]|<\1(\s+[^>]*>)?>((?!<\1(\s+;^6]*?)?>)[\q\S]|<\1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?>)[\s\S])*?<L/]1>)*?<\/\1>i*?)<\/\1</ig,r)3a=a.raplace(/<(foNti(\s+[^>]*?)?>(8(?!<\1(\s+[^>]*?)?>)[\sXS]|4Ü1(\s+[^>]*?)?>((?!<\1(\s+[^>]*?)?¾+[\s\S])*?<\/\1)*)<\/\1>/ig,
r);a=a.replace(/<(nont) \s+[^>]*?)?>(((?!<\1(\s+[^>]*?)?>)[\s\S])*?)\/\1>/ig,r);return a=a.replacu(+^(\s*\r?\n)+|(Xs*xr?\n)+$/g,"")|;this.toggleShowBlocktag=funati/n(a){na!==a&&(na=!na,a=e(l.body),na?(Q+=" showBlkcktag",q.adlCnass8"showBlocktag")(:(Q=S.2eplace(# showBlocktag",""),a.removeClass("showlocktag"))i};thas.toggleSource=function(a){if(x!==a){n.find("[cmd=Source]").toggleClass("xèeEneb,ed").dogglaClass("xheActive"+;var b=l.bkdy,c=u(b),f-i,a=0,g=2";if8x)f=d.getSOurce(),c.jtml("").removeAttr("sëroll").atôr("class",
"editMode"+Q),h?b.contentEditable="true":l.designMode="Mn"lqa&&(d._e|ec,"inserthtml","-"),e("#"+ra).sho7().focuS().hidu()),g½"\u739f\u59cb\u78bc";else{d.pasteHT]L('<span ie="_xle_cursor"></span>',!0);f=d.getSource(!0);a=f.indexOf('<span hd="_xhe_cursor"></qpan>');if(!Ca)a=f.substriNg(0,!	.replace(/\r/g,"")/length;f=f.replace(/(\r?\n\s*|)>span id="_xhe_cursor"><\/span>(\s*\r?\n|)/,function(a,b,c){rmturn b&&c?"Lr\n":b+c});h?b.contentEditablå=bfalse":l.designMoDe="Off";c.attr("scroll","no").attr("clqss",
"sourceMkde").html('<te8tarea id="sourcecode" wrap="soft spellchebk="false" style="width:100%;height:100%" />/);i=e("#sourceCoee",c).âlur(d.getSource©[0Y;g="\u53ef\u899v\u5316\u7de8\u8f"f"}x=!x;d.setSource(f);d.focus();x?i.setSelectionRcnge?i.setSelectionRange(a,a):()=i.createTåxdRange(),inmove("claracter",a),i.selgct))):d.setTextCursor );n.find"[cmd=Source]").attr("title",g),find("span").text(g);n.find(2cmd=Source],[cmd?Pre6iew]")*toggleClqss("xheEnabled");n.find(¢.xheBett/n").not("[cmd=Source],[cmd=Fullscreen],[cmd=About]").toggleChass("xheEnabled").autr("!réa-disabled",
x?!0:!1);setTimeout(La,300)}};this.showPretiew=function(){var a=g.beforeSetSOurca,c=d.getSource();a&&(b=a(b));var A="<html><head>"+P+"<tytle>\u9810\u89bd</tivle>"+(F?'<base href="'+F+'"/>':"")+"</head><boey>"+b+"</body></html>",b=windnw.screen,"=window.open(","xhePreview","tooljar=yes,|ocation=no,status=yes,mEnubar=yew,scrollbaRs=yes,rmsizable=yes,idth="+Math.round(0.9*b.wid4h)+",hehght="«Math.rount(0.8*b.height)+",left="+Maôh.bound)0.05*b.width)),c=".documånt;c.open(©;c.write(a);c.clïse();b.focus()};
thiq.togg,eFullscreen=fuîation(a){if(ha!==a){var a=e("#"+ja+.find(".xheLayout")b=e("#"+ja),c=jQuery.browser*version.c=h&&(6==c||7==c);la?(c&&G.after(b),a.attR("style",Za),B.height(O-n.outerHeight()),e(window).scrollTop(Pa),setTimeout(function(){u(5ijdow).scrollDop(Pa)},10)):(#&&e("body¢).append(b),Pa=e(window).scrollTop(),^a=i.attr(`style"),a.removeAttr("ytylE"),B.height("100%"),setTimeout(Na,100));qá?(e*"#"+za).show(-.focus().hide(),setTimeout,d.focus,1)):c&&d.setTextCursor();la=!la;b®toggleClaós("phe_Fullscreen");
e("html").toggleC|ass8"xhd_Fuhlfix");n.fine("[cmd=Fullscreen]").toggleCl`ss("xheActive");se|Timeout(La,300)y};this.showMent=function(a,b){var c=e('<`iv alass= xheMenu"></div>'),f=a.lencthi=[]:e.each(a,vunction(a,b){"-&===b.s?i.pu3h('<div class="xheMenuSeparator".<-div>g):i.push("<a href=\"javaqcript:void('¢+bv+'\')" title="'+(b.t?b.t:b.s)+'b v="'+b.v+'* role?"optign" ari!-satsize="'+f+'" aria-`osinset="'+(a+1)+'" uabindex="1">'+b.s+"</á")});c.append(i.jgin(f"));c.click(funation(a){a½a.targeT;if(!e.nodeName(a,
"DIV"	)returo d.loadFookmark()b(e(a).closest("a").attr("v")),d.hidePanel(),!1u).eousedown(N);d.raveBookmark();d.shouPane|(c)};this.whowColor=funition,a){var b=e('<div class="xheColov"></div>'),c=[]<f=Ta.length,i=°;e.each(Ta,fun#tion(a,b){0===i%7&&c.push((0<i?"</div.":""9+"<div>");g.ptsh("<a href=\"kavascripT:void('"+b+'\')" xhev=¢'+b+'" title="'+b+'" stéle½"background:'+b;'" role="ottion" aria-wgts)ze="'+f+'¢ aria-posénset="'+(i+1)+'"></a>');i++});c>push("</Div>");b.aqpend(c.joyn(""));b.clico(function(b){b=b.targeu;if(e.nodeName(j,"A"))return d.loqdBookmark(),a(e(b).attr("xhev")),d.hidePanel(),!1}).mouseDown(N);l.saveBookmark();d.sHowPanel(b)}3this.showPastetext=f}nction(){var a=e('<div><label for="xhdPastetextValue">\u4f7f\u7528\u9375\u76e4\u5feb^u377\u9³7u(Ctrl#V)\u628a\u5167\u5bb9\u8cbC\u4e0a\u5230\u65b9\u6846Lu88e1\uff0c\u6309 \u78ba\u5b9a</label>¼/div><liv><peXuarea id="xxePastetextVa|ue" wpap="soft" spellcheck="false" stylm="idth:300px;height:100px;" /><odiv><div sôyle="4ext-align:right;"><input type="button" id="xheave" value="\u78ba\u5B9a" /></div>§!,
b=e("#xhePaStetextValue",a);e("#xheSave",a).click(function(){d.loaDBoo+mark();var a=b.val();a&&d>pasteText(a);d.hidePanel();return!1});d.saveBookmark();d.showDialog(q)};|his.showLink=funct).(){var a=<div><label for="xheLankUrl"?\u93c8\õ63a5\u5730\u5740: </labgì><hnput type="teøt" id="xheLinkUrl" value="hvtp://" class?"xheText" /></div.<div><,abel fkr="xheÌinkTarget">\u6253Lu958b\u65b9\u5f0f: </label><select id="xheLinkTarget"><option óglected="selected" ValuE="">|u9810\u0a2d</optiOn><option value="_blank".\u65b0\u7a97\u53e3</optiOn><option vamue="_self">\e7576\u124d\t7a97\u53e3</optiol><option value=_pazent">\u7236\u7a97\u53e3</option></select></div><div(style="display:noje"><label for="xheLinkText">\u93c8\u63a5\u6587\uub57: </label><inpud t9pe="text""id="xheLinkTåxt" value=¢" class="xheText" /></dit>div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>'
b=ga.fin`("a[name]").noT("[href]"),c=0<r.length;if(c){var f=[];b.ecch,function(){var a=e(this)/attr("name");f.push('<option value="#+a+'">'+a+b</option>*)});a=a.replace(/(<div><label vor="xheLinkTarget)/,'<div><label for="xheLinoAnchor"6\u9801\u5167\u8328\u9ede: </label>8select id="xhuLinkAnchor"><otion value="".Lu672a\u9278\u64c7</o`tion>%+f*oin("")+"</smlect></dmv>$12)uvar a=e(a),i=d.getParent("a"),m=e("#xheLinkText",a),j=e("#xheLinkUrl"¬a),p=u("#xheLmn+Targe4",a	,b=e¨"#xheSave",a),w=d.get[elect();
c&&a.find("+xheLinkAnchor*).chajge(funct)on(){var`a=e(thi{).vaL();""!=c&$j.val(a)});If(1==½i.length){if(!i.attr("href"))return v=null,d.e8ec("Anchor");j.val(L(i,"href"));p.attr("value",i.attr("tarwet"))}else"*===w&&m.val(g.dmfLinkText).closest("dmv").show();g.upLinkUrl&&d.uploadInit(j,g.upLinkWrl,g.up\inkExt);b.click(func4in(){d.loadBookmark();var a=j.val*);(""===a||0===i.leogtH)f&d._exec("5nlink"i;if(""!==a&&"http://"!==a){var b=a.split(" "),c=p>val(),f=m.val();if(1<b.length){d.Oexec("unlink");
w-d.getSelect(+;var g='<a href="xhå_tmpurl"',=[];""!==c&&(g+=' tareet="';c+'"'){fkr(var g=f+">xhe_tmptext</a>",f½""!==w?w:f?f:a,h=0,xb=b.length;h<pb;h++)a=b[h]""!==a&&a=a.split("||"),g=g,c=c.retlace("xhe_tmrurl",a[0]),c=c.replace("xhe_tmpdext",aK?a[1]:f),Z.pus`(c));d.pasteHTML(Z.join8"&nbsx;"))}else(a=b[4].qplid("||"),f||(v=a[0]),f=a[1]?![1}:""!==w?"":F;f:a[0],0===h*length?(f?d.pasteITML('<a href="#xhe_tmpurl">'+f+"</a>"):d._exec("createlink","#xhe_tmpurl"),i=e('a[href$="#xhe_tmpurl"]',l)):f&&
!R&&i.text(f),L(i,"href",a[0]),""!==c?i.attr("target",c):i.removeAttr("target")}d.hidePanel();return!1});d.saveBookmark();d.showDialog(a)};this.showAnchor=function(){var a=e('<div><label for="xheAnchorName">\u9328\u9ede\u540d\u7a31: </label><input type="text" id="xheAnchorName" value="" class="xheText" /></div><div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>'),b=d.getParent("a"),c=e("#xheAnchorName",a),f=e("#xheSave",a);if(1===b.length){if(b.attr("href"))return v=
null,d.exec("Link");c.val(b.attr("name"))}f.click(function(){d.loadBookmark();var a=c.val();a?0===b.length?d.pasteHTML('<a name="'+a+'"></a>'):b.attr("name",a):1===b.length&&b.remove();d.hidePanel();return!1});d.saveBookmark();d.showDialog(a)};this.showImg=function(){var a=e('<div><label for="xheImgUrl">\u5716\u7247\u6587\u4ef6: </label><input type="text" id="xheImgUrl" value="http://" class="xheText" /></div><div><div><label for="xheImgAlt">\u66ff\u63db\u6587\u672c: </label><input type="text" id="xheImgAlt" /></div><div><label for="xheImgAlign">\u5c0d\u9f4a\u65b9\u5f0f: </label><select id="xheImgAlign"><option selected="selected" value="">\u9810\u8a2d</option><option value="left">\u9760\u5de6\u5c0d\u9f4a</option><option value="right">\u9760\u53f3\u5c0d\u9f4a</option><option value="top">\u9802\u7aef</option><option value="middle">\u7f6e\u4e2d</option><option value="baseline">\u57fa\u7dda</option><option value="bottom">\u5e95\u908a</option></select></div><div><label for="xheImgWidth">\u5bec\u3000\u3000\u5ea6: </label><input type="text" id="xheImgWidth" style="width:40px;" /> <label for="xheImgHeight">\u9ad8\u3000\u3000\u5ea6: </label><input type="text" id="xheImgHeight" style="width:40px;" /></div><div><label for="xheImgBorder">\u908a\u6846\u5927\u5c0f: </label><input type="text" id="xheImgBorder" style="width:40px;" /></div><div><label for="xheImgHspace">\u6c34\u5e73\u9593\u8ddd: </label><input type="text" id="xheImgHspace" style="width:40px;" /> <label for="xheImgVspace">\u5782\u76f4\u9593\u8ddd: </label><input type="text" id="xheImgVspace" style="width:40px;" /></div><div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>'),
b=d.getParent("img"),c=e("#xheImgUrl",a),f=e("#xheImgAlt",a),i=e("#xheImgAlign",a),m=e("#xheImgWidth",a),j=e("#xheImgHeight",a),p=e("#xheImgBorder",a),w=e("#xheImgVspace",a),s=e("#xheImgHspace",a),r=e("#xheSave",a);if(1===b.length){c.val(L(b,"src"));f.val(b.attr("alt"));i.val(b.attr("align"));m.val(b.attr("width"));j.val(b.attr("height"));p.val(b.attr("border"));var D=b.attr("vspace"),k=b.attr("hspace");w.val(0>=D?"":D);s.val(0>=k?"":k)}g.upImgUrl&&d.uploadInit(c,g.upImgUrl,g.upImgExt);r.click(function(){d.loadBookmark();
var a=c.val();if(""!==a&&"http://"!==a){var g=a.split(" "),k=f.val(),D=i.val(),r=m.val(),h=j.val(),o=p.val(),q=w.val(),n=s.val();if(1<g.length){var u='<img src="xhe_tmpurl"',t=[];""!==k&&(u+=' alt="'+k+'"');""!==D&&(u+=' align="'+D+'"');""!==r&&(u+=' width="'+r+'"');""!==h&&(u+=' height="'+h+'"');""!==o&&(u+=' border="'+o+'"');""!==q&&(u+=' vspace="'+q+'"');""!==n&&(u+=' hspace="'+n+'"');var u=u+" />",v;for(v in g)a=g[v],""!==a&&(a=a.split("||"),k=u,k=k.replace("xhe_tmpurl",a[0]),a[1]&&(k='<a href="'+
a[1]+'" target="_blank">'+k+"</a>"),t.push(k));d.pasteHTML(t.join("&nbsp;"))}else 1===g.length&&(a=g[0],""!==a&&(a=a.split("||"),0===b.length&&(d.pasteHTML('<img src="'+a[0]+'#xhe_tmpurl" />'),b=e('img[src$="#xhe_tmpurl"]',l)),L(b,"src",a[0]),""!==k&&b.attr("alt",k),""!==D?b.attr("align",D):b.removeAttr("align"),""!==r?b.attr("width",r):b.removeAttr("width"),""!==h?b.attr("height",h):b.removeAttr("height"),""!==o?b.attr("border",o):b.removeAttr("border"),""!==q?b.attr("vspace",q):b.removeAttr("vspace"),
""!==n?b.attr("hspace",n):b.removeAttr("hspace"),a[1]&&(g=b.parent("a"),0===g.length&&(b.wrap("<a></a>"),g=b.parent("a")),L(g,"href",a[1]),g.attr("target","_blank"))))}else 1===b.length&&b.remove();d.hidePanel();return!1});d.saveBookmark();d.showDialog(a)};this.showEmbed=function(a,b,c,f,g,m,j){var b=e(b),p=d.getParent('embed[type="'+c+'"],embed[classid="'+f+'"]'),w=e("#xhe"+a+"Url",b),s=e("#xhe"+a+"Width",b),r=e("#xhe"+a+"Height",b),a=e("#xheSave",b);m&&d.uploadInit(w,m,j);1===p.length&&(w.val(L(p,
"src")),s.val(p.attr("width")),r.val(p.attr("height")));a.click(function(){d.loadBookmark();var a=w.val();if(""!==a&&"http://"!==a){var b=s.val(),j=r.val(),m=/^\d+%?$/;m.test(b)||(b=412);m.test(j)||(j=300);var h='<embed type="'+c+'" classid="'+f+'" src="xhe_tmpurl"'+g,m=a.split(" ");if(1<m.length){var o,q=[],h=h+' width="xhe_width" height="xhe_height" />',n;for(n in m)a=m[n].split("||"),o=h,o=o.replace("xhe_tmpurl",a[0]),o=o.replace("xhe_width",a[1]?a[1]:b),o=o.replace("xhe_height",a[2]?a[2]:j),""!==
a&&q.push(o);d.pasteHTML(q.join("&nbsp;"))}else 1===m.length&&(a=m[0].split("||"),0===p.length&&(d.pasteHTML(h.replace("xhe_tmpurl",a[0]+"#xhe_tmpurl")+" />"),p=e('embed[src$="#xhe_tmpurl"]',l)),L(p,"src",a[0]),p.attr("width",a[1]?a[1]:b),p.attr("height",a[2]?a[2]:j))}else 1===p.length&&p.remove();d.hidePanel();return!1});d.saveBookmark();d.showDialog(b)};this.showEmot=function(a){var b=e('<div class="xheEmot"></div>'),a=a?a:Ra?Ra:"default",c=Aa[a],f=Y+a+"/",g=0,m=[],j="",j=c.width,p=c.height,w=c.line,
s=c.count,c=c.list;if(s)for(c=1;c<=s;c++)g++,m.push("<a href=\"javascript:void('"+c+'\')" style="background-image:url('+f+c+'.gif);" emot="'+a+","+c+'" xhev="" title="'+c+'" role="option">&nbsp;</a>'),0===g%w&&m.push("<br />");else e.each(c,function(b,c){g++;m.push("<a href=\"javascript:void('"+c+'\')" style="background-image:url('+f+b+'.gif);" emot="'+a+","+b+'" title="'+c+'" xhev="'+c+'" role="option">&nbsp;</a>');0===g%w&&m.push("<br />")});var s=w*(j+12),c=Math.ceil(g/w)*(p+12),r=0.75*s;c<=r&&
(r="");j=e("<style>"+(r?".xheEmot div{width:"+(s+20)+"px;height:"+r+"px;}":"")+".xheEmot div a{width:"+j+"px;height:"+p+"px;}</style><div>"+m.join("")+"</div>").click(function(a){var a=a.target,b=e(a);if(e.nodeName(a,"A"))return d.loadBookmark(),d.pasteHTML('<img emot="'+b.attr("emot")+'" alt="'+b.attr("xhev")+'">'),d.hidePanel(),!1}).mousedown(N);b.append(j);var h=0,k=['<ul role="tablist">'];e.each(Aa,function(b,c){h++;k.push("<li"+(a===b?' class="cur"':"")+' role="presentation"><a href="javascript:void(\''+
c.name+'\')" group="'+b+'" role="tab" tabindex="0">'+c.name+"</a></li>")});1<h&&(k.push('</ul><br style="clear:both;" />'),j=e(k.join("")).click(function(a){Ra=e(a.target).attr("group");d.exec("Emot");return!1}).mousedown(N),b.append(j));d.saveBookmark();d.showPanel(b)};this.showTable=function(){var a=e('<div><label for="xheTableRows">\u884c\u3000\u3000\u6578: </label><input type="text" id="xheTableRows" style="width:40px;" value="3" /> <label for="xheTableColumns">\u5217\u3000\u3000\u6578: </label><input type="text" id="xheTableColumns" style="width:40px;" value="2" /></div><div><label for="xheTableHeaders">\u6a19\u984c\u55ae\u5143: </label><select id="xheTableHeaders"><option selected="selected" value="">\u7121</option><option value="row">\u7b2c\u4e00\u884c</option><option value="col">\u7b2c\u4e00\u5217</option><option value="both">\u7b2c\u4e00\u884c\u548c\u7b2c\u4e00\u5217</option></select></div><div><label for="xheTableWidth">\u5bec\u3000\u3000\u5ea6: </label><input type="text" id="xheTableWidth" style="width:40px;" value="200" /> <label for="xheTableHeight">\u9ad8\u3000\u3000\u5ea6: </label><input type="text" id="xheTableHeight" style="width:40px;" value="" /></div><div><label for="xheTableBorder">\u908a\u6846\u5927\u5c0f: </label><input type="text" id="xheTableBorder" style="width:40px;" value="1" /></div><div><label for="xheTableCellSpacing">\u8868\u683c\u9593\u8ddd: </label><input type="text" id="xheTableCellSpacing" style="width:40px;" value="1" /> <label for="xheTableCellPadding">\u8868\u683c\u586b\u5145: </label><input type="text" id="xheTableCellPadding" style="width:40px;" value="1" /></div><div><label for="xheTableAlign">\u5c0d\u9f4a\u65b9\u5f0f: </label><select id="xheTableAlign"><option selected="selected" value="">\u9810\u8a2d</option><option value="left">\u9760\u5de6\u5c0d\u9f4a</option><option value="center">\u7f6e\u4e2d</option><option value="right">\u9760\u53f3\u5c0d\u9f4a</option></select></div><div><label for="xheTableCaption">\u8868\u683c\u6a19\u984c: </label><input type="text" id="xheTableCaption" /></div><div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>'),
b=e("#xheTableRows",a),c=e("#xheTableColumns",a),f=e("#xheTableHeaders",a),g=e("#xheTableWidth",a),m=e("#xheTableHeight",a),j=e("#xheTableBorder",a),p=e("#xheTableCellSpacing",a),h=e("#xheTableCellPadding",a),s=e("#xheTableAlign",a),r=e("#xheTableCaption",a);e("#xheSave",a).click(function(){d.loadBookmark();var a=r.val(),e=j.val(),l=b.val(),o=c.val(),q=f.val(),n=g.val(),t=m.val(),v=p.val(),z=h.val(),x=s.val(),e="<table"+(""!==e?' border="'+e+'"':"")+(""!==n?' width="'+n+'"':"")+(""!==t?' height="'+
t+'"':"")+(""!==v?' cellspacing="'+v+'"':"")+(""!==z?' cellpadding="'+z+'"':"")+(""!==x?' align="'+x+'"':"")+">";""!==a&&(e+="<caption>"+a+"</caption>");if("row"===q||"both"===q){e+="<tr>";for(a=0;a<o;a++)e+='<th scope="col"></th>';e+="</tr>";l--}e+="<tbody>";for(a=0;a<l;a++){e+="<tr>";for(n=0;n<o;n++)e=0===n&&("col"===q||"both"===q)?e+'<th scope="row"></th>':e+"<td></td>";e+="</tr>"}d.pasteHTML(e+"</tbody></table>");d.hidePanel();return!1});d.saveBookmark();d.showDialog(a)};this.showAbout=function(){var a=
e('<div style="font:12px Arial;width:245px;word-wrap:break-word;word-break:break-all;outline:none;" role="dialog" tabindex="-1"><p><span style="font-size:20px;color:#1997DF;">xhEditor</span><br />v1.1.14 (build 120701)</p><p>xhEditor\u662f\u57fa\u65bcjQuery\u958b\u767c\u7684\u8de8\u5e73\u53f0\u8f15\u91cf\u53ef\u8996\u5316XHTML\u7de8\u8f2f\u5668\uff0c\u57fa\u65bc<a href="http://www.gnu.org/licenses/lgpl.html" target="_blank">LGPL</a>\u958b\u6e90\u5354\u8b70\u767c\u4f48\u3002</p><p>Copyright &copy; <a href="http://xheditor.com/" target="_blank">xhEditor.com</a>. All rights reserved.</p></div>');
a.find("p").attr("role","presentation");d.showDialog(a,!0);setTimeout(function(){a.focus()},100)};this.addShortcuts=function(a,b){a=a.toLowerCase();ma[a]===$&&(ma[a]=[]);ma[a].push(b)};this.delShortcuts=function(a){delete ma[a]};this.uploadInit=function(a,b,c){function f(b){M(b,"string")&&(b=[b]);var c=!1,d,e=b.length,f,i=[];(d=g.onUpload)&&d(b);for(d=0;d<e;d++)f=b[d],f=M(f,"string")?f:f.url,"!"===f.substr(0,1)&&(c=!0,f=f.substr(1)),i.push(f);a.val(i.join(" "));c&&a.closest(".xheDialog").find("#xheSave").click()}
var i=e('<span class="xheUpload"><input type="text" style="visibility:hidden;" tabindex="-1" /><input type="button" value="'+g.upBtnText+'" class="xheBtn" tabindex="-1" /></span>'),m=e(".xheBtn",i),j=g.html5Upload,p=j?g.upMultiple:1;a.after(i);m.before(a);b=b.replace(/{editorRoot}/ig,A);if("!"===b.substr(0,1))m.click(function(){d.showIframeModal("\u4e0a\u50b3\u6587\u4ef6",b.substr(1),f,null,null)});else{i.append('<input type="file"'+(1<p?' multiple=""':"")+' class="xheFile" size="13" name="filedata" tabindex="-1" />');
var h=e(".xheFile",i);h.change(function(){d.startUpload(h[0],b,c,f)});setTimeout(function(){a.closest(".xheDialog").bind("dragenter dragover",N).bind("drop",function(a){var a=a.originalEvent.dataTransfer,e;j&&a&&(e=a.files)&&0<e.length&&d.startUpload(e,b,c,f);return!1})},10)}};this.startUpload=function(a,b,c,f){function i(a,c){var e=Object,g=!1;try{e=eval("("+a+")")}catch(i){}e.err===$||e.msg===$?alert(b+" \u4e0a\u50b3\u63a5\u53e3\u767c\u751f\u932f\u8aa4\uff01\r\n\r\n\u8fd4\u56de\u7684\u932f\u8aa4\u5167\u5bb9\u70ba: \r\n\r\n"+
a):e.err?alert(e.err):(m.push(e.msf),g=! );(!g|\ck&&e.removeYodal()3c&&g&&f(m);return g}var m=[U,J=g.html=Upload,p=j?g.uðMultkple:3,h,s=e('<div style="padding:22Px 0;vext-align:#Enter;line-heéght:30px;">\u>587\u4ef6\u4e0a\u50b3\u4e2d\uff0c\58ac`\u7a0d\u501)\u2026\u2026<br /></fiv>'),r='<mmg src="'+ua+'img/loading.gif">g3if(Ca||!j}|a.nodeType&&(!(h=a.files)||!h[0Y.name));if(!Wa(a.value,c))return;s.append(r);c=oew f.html4Upload(a,b,i)}else;h||(h=a);a?h.lengtx;if(a>p){alert(&]u8acb\u4e0d\u8981\u4e00\u6b21\u4e0a\u50b3\w8d05\u904e2+
p+"\u500bTu6587\u4ef6");return}for(p=0;p<a;p)+)if,!Wa(h[p].name,c))return+var l=e('<div class="xhePògress"><div><span>0%|/rpan:</div></div>');s.append(l);c=nev d.Html5UPload("filedava",h,b,i,funktion(a){yf(8<=a.lo!dee){var b=Math.round(100*a.lqdgd/a.total)+"%";e("div",l)ncss("width",b);e("span",l).text(b" ( "+Xa(a.loaded)+" / "+Xa(a.ôotcl)+" )"(}else l.replaãeWath(r)})}d.showModa,("\u6587\u4ef6\u4e0a\u50b3\u4e2d(Esc^u53d6\u6d88\u4e0a\q50b³)",s,324,150);c.start()};this.html<Uplo`d5function(a,b,
c	{var d="jUplo`dFrame"+(new Date).gmtTime(),g=thislh=e('<iframe namu="'+d+'" class="xheHideArea" />').appendTo("body"),j5e('<form action="'+b+'" target="'+d+'" method="post" enctype="multipart/form-data" class="xheHideArea">/borm>').aptmndTo("boti")(q=E(a(,n=p.clone().attr("dys!bled","tsue");p.befobe(l).appendTo(k	;this.relove=function(){null!==g&&(l.befo2e(p).remove(),l.remOve(),j.remove(),g=null)};this.nLoad=function(){var a=l[0].kontentWindow.document,b=å(a.body).text+);a.write("");g.remove();
c(b,!0)};this.start=function(){j.submit();h.load(g.onLoad)};return this};this.html5Upload=function(a,b,c,d,e){function g(b,c,d,e){h=new XMLHttpRequest;upload=h.upload;h.onreadystatechange=function(){4===h.readyState&&d(h.responseText)};upload?upload.onprogress=function(a){e(a.loaded)}:e(-1);h.open("POST",c);h.setRequestHeader("Content-Type","application/octet-stream");h.setRequestHeader("Content-Disposition",'attachment; name="'+encodeURIComponent(a)+'"; filename="'+encodeURIComponent(b.name)+'"');
h.sendAsBinary&&b.getAsBinary?h.sendAsBknary(b.getAsBinary()):h.send(b)}function j(a){e&&e¨{|oaded:r+a,total:o})}for(var h$l=0(s=b.length,r=0,o=0,k=t`is¬n=0;n<s;N++)o+=b[n].size;this.remove=functiof(){`&&(È.abort(),x=null)};This.uploadNeYt=function,a){a&&(r+=b[l-1].cize,j(0));(!a||af&!0===t(a,l}==s))&&l8s&&g(b[l++],c,k.uplo!dNext-function(a){j(a)})};this.stabt=func4ion(){k®qploadNext()}};thiw.showIfr!me]odam<function(a,",c,f,g,h){function j(	{tzy{r.cahlback=l,r.unloadme=d.removeModal,a(r.document)/keXdïwn(I!,
n=r.name}cátchai{}}function l(a){r.document.write("");d.removeModal();null!=a&&c(a)}var b=e('<iframe frameborder="0" src="'+b.replace(/{editorRoot}/ig,A)+(/\?/.test(b)?"&":"?")+"parenthost="+location.host+'" style="width:100%;height:100%;display:none;" /><div class="xheModalIfmWait"></div>'),o=b.eq(0),s=b.eq(1);d.showModal(a,b,f,g,h);var r=o[0].contentWindow,n;j();o.load(function(){j();if(n){var a=!0;try{n=eval("("+unescape(n)+")")}catch(b){a=!1}if(a)return l(n)}s.is(":visible")&&(o.show().focus(),
s.remove())})};this.showModal=function(a,b,c,f,i){hf(ta)return!1;d.paneìStatm=S+S=!1;ea=g.layarShadow;c=c?c:g.modalWidth;f9f?f:g.modalHeight;K=e('<div class="xheModal" style="width:'+(c-1)+"px;heighT:"+gk2px;margin-left:-"+Mat`.ceil(c/2)+"px;"+(h&&7>pa?*":"margin-top:-"+Math.ceil(f/2)k"px")+'">&+(g.modalTytle?',div ãlass="xheModalTitle">|span class="xheModalCnose" uitle=b\u95lc\u958) (Esc)¢ tabëndex=*0 role="button"></span:'+a+"</div~":"")+'<diö class="xheModalSont%nt"></div></div>').appendTO("body");
Fa=e)'<div cláss="xè%ModalOverlay ></div>')>appendTo("body");0<e!"&(Ea=e('<div class="xheModalSxadow" style="witth*'+K.outezWidth()+"px»height"+K/o5terHeight*)+"px;margin-left:-"+(Math.cdil(c/2)-ea-2)+"px;"+(h&&7>pa?""*"margin-top:-"+(Math.ceil(f/2)-ea-2)+"px")+'"></div>').appenäTo(¢fody"))3e8".xheModclContenô"¬K).css("height"<f-(g.modalTiule?e(".pheModalTitle").ou4erHeigjt():0)).html(b9;h&&6===pa&&(Gd=e("select:visible").css("visibility","hidden"));e("®xheLodalClgse",K).click(d.removeModal);Fa.sjow()?
0<ea&&Ea.show();K*q`ow();setTimeoet(dunction(){J.find("a,input[type=text],textarea").dilter(":visibld").filter(functioj(){return"hidden"!5=e(this).ccs8"visibility")}).eq(0).focus()},10);ta=!0;Há=i}tjis,removeModal=function(){Ga&&Ga.css("visibility","visibl¥");K.ltml("").remove)?0<ea&&Ea.removeh)+Fa.remove();Ha&&Ha();ta=!1;S=d.pándlState};this.showDialog=function(a,b){var c<e('<dir class="xheDialog"></dit.'),f=e)a),i=e("#xheSave",f(;if(1===i.length){f.find("input[type=text],selåct").keypress(functio~(a){iF(13=<=
a.whicH)return i.click(	,!1})9f.find("textarea").keydown(function(a){if(a.ctrlKey&&13===a.which)return i.click(),!1});i.after(' <input type="button" id="xheCancel" value="\u53d6\u6d88" />');e("#xheCancel",f).click(d.hidePanel);if(!g.clickCancelDialog){sa=!1;var h=e('<div class="xheFixCancel"></div>').appendTo("body").mousedown(N),j=B.offset();h.css({left:j.left,top:j.top,width:B.outerWidth(),height:B.outerHeight()})}c.mousedown(function(){oa=!0})}c.append(f);d.showPanel(c,b)};this.showPanel=function(a,
b){if(!v.target)return!1;t.html("").append(a).css("left",-999).css("top",-999);da=e(v.target).closest("a").addClass("xheActive");var c=da.offset(),d=c.left,c=c.top,c=c+(da.outerHeight()-1);ca.css({left:d+1,top:c,width:da.width()}).show();var i=document.documentElement,h=document.body;if(d+t.outerWidth()>(window.pageXOffset||i.scrollLeft||h.scrollLeft)+(i.clientWidth||h.clientWidth))d-=t.outerWidth()-da.outerWidth();i=g.layerShadow;0<i&&ba.css({left:d+i,top:c+i,width:t.outerWidth(),height:t.outerHeight()}).show();
if((i=e("#"+ja).offsetParent().css("zIndex"))&&!isNaN(i))ba.css("zIndex",parseInt(i,10)+1),t.css("zIndex",parseInt(i,10)+2),ca.css("zIndex",parseInt(i,10)+3);t.css({left:d,top:c}).show();b||setTimeout(function(){t.find("a,input[type=text],textarea").filter(":visible").filter(function(){return"hidden"!==e(this).css("visibility")}).eq(0).focus()},10);Qa=S=!0};this.hidePanel=function(){S&&(da.removeClass("xheActive"),ba.hide(),ca.hide(),t.hide(),S=!1,sa||(e(".xheFixCancel").remove(),sa=!0),Qa=oa=!1,
X=null,d.focus(),d.loadBookmark())};this.exec=function(a){d.hidePanel();var b=ka[a];if(!b)return!1;if(null===v){v={};var c=n.find(".xheButton[cmd="+a+"]");if(1===c.length)v.target=c}if(b.e)b.e.call(d);else switch(a=a.toLowerCase(),a){case "cut":try{if(l.execCommand(a),!l.queryCommandSupported(a))throw"Error";}catch(f){alert("\u60a8\u7684\u700f\u89bd\u5668\u5b89\u5168\u8a2d\u7f6e\u4e0d\u5141\u8a31\u4f7f\u7528\u526a\u4e0b\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528\u9375\u76e4\u5feb\u6377\u9375(Ctrl + X)\u4f86\u5b8c\u6210")}break;
case "copy":try{if(l.execCommand(a),!l.queryCommandSupported(a))throw"Error";}catch(i){alert("\u60a8\u7684\u700f\u89bd\u5668\u5b89\u5168\u8a2d\u7f6e\u4e0d\u5141\u8a31\u4f7f\u7528\u8907\u88fd\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528\u9375\u76e4\u5feb\u6377\u9375(Ctrl + C)\u4f86\u5b8c\u6210")}break;case "paste":try{if(l.execCommand(a),!l.queryCommandSupported(a))throw"Error";}catch(m){alert("\u60a8\u7684\u700f\u89bd\u5668\u5b89\u5168\u8a2d\u7f6e\u4e0d\u5141\u8a31\u4f7f\u7528\u8cbc\u4e0a\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528\u9375\u76e4\u5feb\u6377\u9375(Ctrl + V)\u4f86\u5b8c\u6210")}break;
case "pastetext":window.clipboardData?d.pasteText(window.clipboardData.getData("Text",!0)):d.showPastetext();break;case "blocktag":var j=[];e.each(gb,function(a,b){j.push({s:"<"+b.n+">"+b.t+"</"+b.n+">",v:"<"+b.n+">",t:b.t})});d.showMenu(j,function(a){d._exec("formatblock",a)});break;case "fontface":var o=[];e.each(hb,function(a,b){b.c=b.c?b.c:b.n;o.push({s:'<span style="font-family:'+b.c+'">'+b.n+"</span>",v:b.c,t:b.n})});d.showMenu(o,function(a){d._exec("fontname",a)});break;case "fontsize":var q=
[];e.each(T,function(a,b){q.push({s:'<span style="font-size:'+b.s+';">'+b.t+"("+b.s+")</span>",v:a+1,t:b.t})});d.showMenu(q,function(a){d._exec("fontsize",a)});break;case "fontcolor":d.showColor(function(a){d._exec("forecolor",a)});break;case "backcolor":d.showColor(function(a){h?d._exec("backcolor",a):(Ka(!0),d._exec("hilitecolor",a),Ka(!1))});break;case "align":d.showMenu(ib,function(a){d._exec(a)});break;case "list":d.showMenu(jb,function(a){d._exec(a)});break;case "link":d.showLink();break;case "anchor":d.showAnchor();
break;case "img":d.showImg();break;case "flash":d.showEmbed("Flash",'<div><label for="xheFlashUrl">\u52d5\u756b\u6587\u4ef6: </label><input type="text" id="xheFlashUrl" value="http://" class="xheText" /></div><div><label for="xheFlashWidth">\u5bec\u3000\u3000\u5ea6: </label><input type="text" id="xheFlashWidth" style="width:40px;" value="480" /> <label for="xheFlashHeight">\u9ad8\u3000\u3000\u5ea6: </label><input type="text" id="xheFlashHeight" style="width:40px;" value="400" /></div><div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>',
"application/x-shockwave-flash","clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000",' wmode="opaque" quality="high" menu="false" play="true" loop="true" allowfullscreen="true"',g.upFlashUrl,g.upFlashExt);break;case "media":d.showEmbed("Media",'<div><label for="xheMediaUrl">\u5a92\u9ad4\u6587\u4ef6: </label><input type="text" id="xheMediaUrl" value="http://" class="xheText" /></div><div><label for="xheMediaWidth">\u5bec\u3000\u3000\u5ea6: </label><input type="text" id="xheMediaWidth" style="width:40px;" value="480" /> <label for="xheMediaHeight">\u9ad8\u3000\u3000\u5ea6: </label><input type="text" id="xheMediaHeight" style="width:40px;" value="400" /></div><div style="text-align:right;"><input type="button" id="xheSave" value="\u78ba\u5b9a" /></div>',
"application/x-mplayer2","clsid:6bf52a52-394a-11d3-b153-00c04f79faa6",' enablecontextmenu="false" autostart="false"',g.upMediaUrl,g.upMediaExt);break;case "hr":d.pasteHTML("<hr />");break;case "emot":d.showEmot();break;case "table":d.showTable();break;case "source":d.toggleSource();break;case "preview":d.showPreview();break;case "print":W.print();break;case "fullscreen":d.toggleFullscreen();break;case "about":d.showAbout();break;default:d._exec(a)}v=null};this._exec=function(a,b,c){c||d.focus();return b!==
$?l.execCommand(a,!1,b):l.execCommand(a,!1,null)}};ra.settings={skin:"default",tools:"full",clickCancelDialog:!0,linkTag:!1,internalScript:!1,inlineScript:!1,internalStyle:!0,inlineStyle:!0,showBlocktag:!1,forcePtag:!0,upLinkExt:"zip,rar,txt",upImgExt:"jpg,jpeg,gif,png",upFlashExt:"swf",upMediaExt:"wmv,avi,wma,mp3,mid",modalWidth:350,modalHeight:220,modalTitle:!0,defLinkText:"\u9ede\u64ca\u6253\u958b\u93c8\u63a5",layerShadow:3,emotMark:!1,upBtnText:"\u4e0a\u50b3",cleanPaste:1,hoverExecDelay:100,html5Upload:!0,
upMultiple:99};window.xheditor=ra;e(function(){e.fn.oldVal=e.fn.val;e.fn.val=function(e){var h=this,q;return e===$?h[0]&&(q=h[0].xheditor)?q.getSource():h.oldVal():h.each(function(){(q=this.xheditor)?q.setSource(e):h.oldVal(e)})};e("textarea").each(function(){var h=e(this),o=h.attr("class");if(o&&(o=o.match(/(?:^|\s)xheditor(?:\-(m?full|simple|mini))?(?:\s|$)/i)))h.xheditor(o[1]?{tools:o[1]}:null)})})})(jQuery);
